<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VocaMaster - TOEFL Flashcards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; background-color: #f0f4f8; overflow-x: hidden; }
        
        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ ìˆ˜ì •: ìœ„ì¹˜ ê³ ì • */
        .card-container { perspective: 1000px; }
        .card { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform 0.6s; }
        .card.flipped { transform: rotateY(180deg); }
        
        /* .card-faceì— top:0, left:0ì„ ì£¼ì–´ ë’¤ì§‘ì–´ë„ ìœ„ì¹˜ê°€ íŠ€ì§€ ì•Šê²Œ í•¨ */
        .card-face { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            backface-visibility: hidden; 
            -webkit-backface-visibility: hidden; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center; 
            padding: 1.5rem; 
            border-radius: 1.5rem; 
        }
        .card-front { background-color: #ffffff; color: #1e293b; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); z-index: 2; }
        .card-back { background-color: #4f46e5; color: white; transform: rotateY(180deg); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); z-index: 1; }
        
        /* ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ */
        #sidebar { transition: transform 0.3s ease-in-out; }
        #sidebar.open { transform: translateX(0); }
        #sidebar.closed { transform: translateX(-100%); }
        
        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c7c7c7; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col relative">

    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl w-80">
            <h2 class="text-xl font-bold mb-4">ë™ê¸°í™” ID ì…ë ¥</h2>
            <p class="text-gray-600 text-sm mb-4">PCì™€ í°ì—ì„œ ê°™ì€ IDë¥¼ ì…ë ¥í•˜ë©´ í•™ìŠµ ê¸°ë¡ì´ ë™ê¸°í™”ë©ë‹ˆë‹¤.</p>
            <input type="text" id="sync-id-input" placeholder="ì˜ˆ: my-voca-01" class="w-full border p-2 rounded mb-4">
            <button onclick="saveSyncId()" class="w-full bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" onclick="toggleSidebar()"></div>
    
    <div id="sidebar" class="fixed top-0 left-0 h-full w-80 bg-white shadow-2xl z-40 closed overflow-y-auto p-4">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold text-gray-800">ë‹¨ì–´ ëª©ë¡</h2>
            <button onclick="toggleSidebar()" class="text-gray-500 hover:text-gray-800"><i class="fas fa-times text-xl"></i></button>
        </div>
        <div id="sidebar-content" class="space-y-4"></div>
    </div>

    <header class="w-full bg-white shadow-sm p-4 flex items-center justify-between sticky top-0 z-20">
        <button onclick="toggleSidebar()" class="text-slate-600 text-xl p-2"><i class="fas fa-bars"></i></button>
        <h1 class="text-lg md:text-xl font-bold text-slate-800">VocaMaster</h1>
        <div class="w-8"></div>
    </header>

    <main class="flex-grow flex flex-col items-center justify-start p-4 w-full max-w-2xl mx-auto mt-4">
        
        <div class="w-full bg-white rounded-xl p-4 shadow-sm mb-6">
            <div class="flex flex-wrap gap-2 justify-center mb-4">
                <span class="text-xs font-bold text-gray-500 self-center mr-2">ë³´ê¸°:</span>
                <button onclick="setFilter('all')" id="btn-filter-all" class="px-3 py-1 text-sm rounded-full bg-indigo-600 text-white transition">ì „ì²´</button>
                <button onclick="setFilter('unknown')" id="btn-filter-unknown" class="px-3 py-1 text-sm rounded-full bg-gray-200 text-gray-700 transition">ğŸ”´ ëª»ì™¸ì›€</button>
                <button onclick="setFilter('ambiguous')" id="btn-filter-ambiguous" class="px-3 py-1 text-sm rounded-full bg-gray-200 text-gray-700 transition">ğŸŸ¡ ì• ë§¤í•¨</button>
                <button onclick="setFilter('memorized')" id="btn-filter-memorized" class="px-3 py-1 text-sm rounded-full bg-gray-200 text-gray-700 transition">ğŸŸ¢ ì™¸ì›€</button>
            </div>
            
            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 text-sm text-gray-700 bg-gray-50 p-2 rounded-lg">
                <label class="flex items-center cursor-pointer select-none">
                    <input type="checkbox" id="reverse-mode-toggle" class="mr-2 w-4 h-4 text-indigo-600" onchange="toggleViewOptions()">
                    <span>ğŸ‡°ğŸ‡· ëœ» ë¨¼ì € ë³´ê¸°</span>
                </label>
                <div class="hidden sm:block w-px h-4 bg-gray-300"></div>
                <label class="flex items-center cursor-pointer select-none">
                    <input type="checkbox" id="english-def-toggle" class="mr-2 w-4 h-4 text-indigo-600" onchange="toggleViewOptions()">
                    <span>ğŸ‡ºğŸ‡¸ ëœ»ì„ ì˜ì–´ë¡œ ë³´ê¸°</span>
                </label>
            </div>
        </div>

        <div class="card-container h-80 w-full mb-4 cursor-pointer relative" onclick="flipCard()">
            <div id="card" class="card w-full h-full">
                <div class="card-face card-front relative">
                    <span id="card-difficulty" class="absolute top-4 right-4 text-xs font-bold px-2 py-1 rounded bg-gray-100 text-gray-500">Medium</span>
                    <span id="card-part" class="absolute top-4 left-4 text-xs italic text-gray-400">verb</span>
                    <h2 id="card-front-text" class="text-4xl font-bold break-keep px-2">Promote</h2>
                </div>
                <div class="card-face card-back">
                    <h2 id="card-back-main" class="text-3xl font-bold mb-4 break-keep px-2">í™ë³´í•˜ë‹¤</h2>
                    <p id="card-back-sub" class="text-base font-medium opacity-90 break-keep px-4">to encourage</p>
                </div>
            </div>
        </div>

        <div id="example-area" class="w-full bg-indigo-50 rounded-lg p-4 mb-6 hidden transition-all">
            <p class="text-indigo-900 font-medium text-center italic">"<span id="example-text"></span>"</p>
        </div>
        <button onclick="toggleExample()" class="text-indigo-600 text-sm font-semibold mb-6 hover:underline">
            <i class="far fa-eye mr-1"></i> ì˜ˆë¬¸ ë³´ê¸° / ìˆ¨ê¸°ê¸°
        </button>

        <div class="grid grid-cols-3 gap-3 w-full mb-8">
            <button onclick="updateStatus('unknown')" id="btn-status-unknown" class="p-3 rounded-lg border-2 border-red-100 hover:bg-red-50 text-red-600 font-bold transition flex flex-col items-center justify-center text-sm md:text-base">
                <span>ğŸ”´</span><span>ëª°ë¼ìš”</span>
            </button>
            <button onclick="updateStatus('ambiguous')" id="btn-status-ambiguous" class="p-3 rounded-lg border-2 border-yellow-100 hover:bg-yellow-50 text-yellow-600 font-bold transition flex flex-col items-center justify-center text-sm md:text-base">
                <span>ğŸŸ¡</span><span>ì• ë§¤í•´ìš”</span>
            </button>
            <button onclick="updateStatus('memorized')" id="btn-status-memorized" class="p-3 rounded-lg border-2 border-green-100 hover:bg-green-50 text-green-600 font-bold transition flex flex-col items-center justify-center text-sm md:text-base">
                <span>ğŸŸ¢</span><span>ì™¸ì› ì–´ìš”</span>
            </button>
        </div>

        <div class="flex items-center justify-center space-x-6 mb-8">
            <button onclick="prevCard()" class="w-12 h-12 rounded-full bg-white shadow text-gray-600 hover:bg-gray-50 active:scale-95 transition"><i class="fas fa-chevron-left"></i></button>
            <span id="card-counter" class="text-gray-500 font-mono">1 / 10</span>
            <button onclick="nextCard()" class="w-12 h-12 rounded-full bg-indigo-600 shadow text-white hover:bg-indigo-700 active:scale-95 transition"><i class="fas fa-chevron-right"></i></button>
        </div>

    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // ==========================================
        // [í•„ìˆ˜] ì—¬ê¸°ì— ë³¸ì¸ì˜ Firebase ì„¤ì •ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyAoLwWDvszFSxKxrrRgts2sxhKtmalAm94",
            authDomain: "my-toefl-voca.firebaseapp.com",
            projectId: "my-toefl-voca",
            storageBucket: "my-toefl-voca.firebasestorage.app",
            messagingSenderId: "929048950334",
            appId: "1:929048950334:web:d33177785663a9dd22c36f",
            measurementId: "G-TVDZVQJECG"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        window.db = db;
        window.ref = ref;
        window.set = set;
        window.onValue = onValue;
        
        initApp();
    </script>

    <script>
        // --- ë°ì´í„° (ìƒ˜í”Œ) ---
        const rawVocabulary = [
            { "Word": "promote", "Part of Speech": "verb", "Difficulty": "medium", "Korean Definition": "í™ë³´í•˜ë‹¤, ì´‰ì§„í•˜ë‹¤", "English Definition": "to further the progress of something", "Example Sentence": "The organization works to promote healthy eating habits." },
            { "Word": "proportion", "Part of Speech": "noun", "Difficulty": "hard", "Korean Definition": "ë¹„ìœ¨, ë¶€ë¶„, ê· í˜•", "English Definition": "the size or amount of something compared to the whole", "Example Sentence": "Cartoons often have exaggerated proportions." },
            { "Word": "pursue", "Part of Speech": "verb", "Difficulty": "hard", "Korean Definition": "ì¶”êµ¬í•˜ë‹¤, ë’¤ì«“ë‹¤", "English Definition": "to try to achieve; to follow", "Example Sentence": "Man pursued the dream of flight for hundreds of years." },
            { "Word": "capacity", "Part of Speech": "noun", "Difficulty": "medium", "Korean Definition": "ìˆ˜ìš© ëŠ¥ë ¥, ìš©ëŸ‰", "English Definition": "the maximum amount that something can contain.", "Example Sentence": "The stadium has a seating capacity of 50,000." },
            { "Word": "efficient", "Part of Speech": "adj", "Difficulty": "easy", "Korean Definition": "íš¨ìœ¨ì ì¸", "English Definition": "achieving maximum productivity with minimum wasted effort", "Example Sentence": "Fluorescent lamps are efficient at converting electricity into light." }
        ];

        // --- ìƒíƒœ ë³€ìˆ˜ ---
        let userSyncId = localStorage.getItem('voca_sync_id');
        let statusData = {}; 
        let currentList = []; 
        let currentIndex = 0;
        let currentFilter = 'all';
        
        // ë³´ê¸° ì˜µì…˜
        let isReverseMode = false; // í•œê¸€ ë¨¼ì € ë³´ê¸°
        let isEnglishDefMode = false; // ëœ»ì„ ì˜ì–´ë¡œ ë³´ê¸°

        // --- ì´ˆê¸°í™” ---
        function initApp() {
            if (!userSyncId) {
                document.getElementById('login-modal').classList.remove('hidden');
            } else {
                startSync();
            }
        }

        window.saveSyncId = function() {
            const input = document.getElementById('sync-id-input').value.trim();
            if(input) {
                userSyncId = input;
                localStorage.setItem('voca_sync_id', input);
                document.getElementById('login-modal').classList.add('hidden');
                startSync();
            } else {
                alert("IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }
        }

        function startSync() {
            // Firebase ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ
            const starCountRef = window.ref(window.db, 'users/' + userSyncId);
            window.onValue(starCountRef, (snapshot) => {
                const data = snapshot.val();
                statusData = data || {}; 
                applyFilter(); // ë¦¬ìŠ¤íŠ¸ ê°±ì‹ 
                renderSidebar(); // ì‚¬ì´ë“œë°” ê°±ì‹  (ë°ì´í„° ì˜¤ë©´ ì¦‰ì‹œ)
            });
        }

        // --- í•„í„° ë¡œì§ ---
        window.setFilter = function(filterType) {
            currentFilter = filterType;
            ['all', 'unknown', 'ambiguous', 'memorized'].forEach(t => {
                const btn = document.getElementById(`btn-filter-${t}`);
                if(t === filterType) {
                    btn.classList.remove('bg-gray-200', 'text-gray-700');
                    btn.classList.add('bg-indigo-600', 'text-white');
                } else {
                    btn.classList.add('bg-gray-200', 'text-gray-700');
                    btn.classList.remove('bg-indigo-600', 'text-white');
                }
            });
            applyFilter();
        }

        function applyFilter() {
            const combinedData = rawVocabulary.map(item => {
                const status = statusData[item.Word] || 'unknown';
                return { ...item, status: status };
            });

            if (currentFilter === 'all') {
                currentList = combinedData;
            } else {
                currentList = combinedData.filter(item => item.status === currentFilter);
            }

            currentIndex = 0;
            if (currentList.length === 0) renderEmpty();
            else renderCard();
        }

        // --- ë Œë”ë§ (í•µì‹¬ ìˆ˜ì • ë¶€ë¶„) ---
        function renderCard() {
            if(currentList.length === 0) return;
            const item = currentList[currentIndex];
            const card = document.getElementById('card');
            
            // ì¹´ë“œ ë’¤ì§‘ê¸° ì´ˆê¸°í™”
            card.classList.remove('flipped');
            document.getElementById('example-area').classList.add('hidden');

            setTimeout(() => {
                // ìƒë‹¨ ì •ë³´
                document.getElementById('card-difficulty').innerText = item.Difficulty.toUpperCase();
                document.getElementById('card-part').innerText = item['Part of Speech'];
                document.getElementById('example-text').innerText = item['Example Sentence'];

                // í…ìŠ¤íŠ¸ ë³€ìˆ˜ ì¤€ë¹„
                const word = item.Word;
                const korDef = item['Korean Definition'];
                const engDef = item['English Definition'];
                
                // í‘œì‹œ ë¡œì§ (4ê°€ì§€ ê²½ìš°ì˜ ìˆ˜)
                let frontText, backMain, backSub;

                // 1. ëœ»: í•œê¸€ / ëª¨ë“œ: ê¸°ë³¸ (ì˜ì–´ ë‹¨ì–´ -> í•œê¸€ ëœ»)
                if (!isReverseMode && !isEnglishDefMode) {
                    frontText = word;
                    backMain = korDef;
                    backSub = engDef;
                }
                // 2. ëœ»: ì˜ì–´ / ëª¨ë“œ: ê¸°ë³¸ (ì˜ì–´ ë‹¨ì–´ -> ì˜ì–´ ëœ»)
                else if (!isReverseMode && isEnglishDefMode) {
                    frontText = word;
                    backMain = engDef;
                    backSub = korDef; // ë³´ì¡°ë¡œ í•œê¸€ í‘œì‹œ
                }
                // 3. ëœ»: í•œê¸€ / ëª¨ë“œ: ë¦¬ë²„ìŠ¤ (í•œê¸€ ëœ» -> ì˜ì–´ ë‹¨ì–´)
                else if (isReverseMode && !isEnglishDefMode) {
                    frontText = korDef; // ì—¬ëŸ¬ ê°œë©´ ë‹¤ ë³´ì—¬ì¤Œ
                    backMain = word;
                    backSub = engDef;
                }
                // 4. ëœ»: ì˜ì–´ / ëª¨ë“œ: ë¦¬ë²„ìŠ¤ (ì˜ì–´ ëœ» -> ì˜ì–´ ë‹¨ì–´)
                else if (isReverseMode && isEnglishDefMode) {
                    frontText = engDef;
                    backMain = word;
                    backSub = korDef;
                }

                document.getElementById('card-front-text').innerText = frontText;
                document.getElementById('card-back-main').innerText = backMain;
                document.getElementById('card-back-sub').innerText = backSub;

                document.getElementById('card-counter').innerText = `${currentIndex + 1} / ${currentList.length}`;
                updateStatusButtons(item.status);

            }, 200);
        }

        function renderEmpty() {
            document.getElementById('card-front-text').innerText = "ì™„ë£Œ!";
            document.getElementById('card-back-main').innerText = "í•´ë‹¹í•˜ëŠ” ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.";
            document.getElementById('card-back-sub').innerText = "í•„í„°ë¥¼ ë³€ê²½í•´ë³´ì„¸ìš”.";
            document.getElementById('card-counter').innerText = "0 / 0";
        }

        window.toggleViewOptions = function() {
            isReverseMode = document.getElementById('reverse-mode-toggle').checked;
            isEnglishDefMode = document.getElementById('english-def-toggle').checked;
            renderCard(); // ì¦‰ì‹œ ë°˜ì˜
        }

        function updateStatusButtons(currentStatus) {
            ['unknown', 'ambiguous', 'memorized'].forEach(status => {
                const btn = document.getElementById(`btn-status-${status}`);
                btn.classList.remove('ring-4', 'ring-indigo-300', 'bg-red-50', 'bg-yellow-50', 'bg-green-50');
                if (status === currentStatus) {
                    btn.classList.add('ring-4', 'ring-indigo-300');
                    // í™œì„±í™”ëœ ë°°ê²½ìƒ‰ ì¶”ê°€
                    if(status === 'unknown') btn.classList.add('bg-red-50');
                    if(status === 'ambiguous') btn.classList.add('bg-yellow-50');
                    if(status === 'memorized') btn.classList.add('bg-green-50');
                }
            });
        }

        // --- ì¸í„°ë™ì…˜ ---
        window.flipCard = function() { document.getElementById('card').classList.toggle('flipped'); }
        window.toggleExample = function() { document.getElementById('example-area').classList.toggle('hidden'); }
        window.nextCard = function() { if (currentList.length === 0) return; currentIndex = (currentIndex + 1) % currentList.length; renderCard(); }
        window.prevCard = function() { if (currentList.length === 0) return; currentIndex = (currentIndex - 1 + currentList.length) % currentList.length; renderCard(); }

        // --- Firebase ì—…ë°ì´íŠ¸ ë° ì‚¬ì´ë“œë°” ---
        window.updateStatus = function(newStatus) {
            if (currentList.length === 0) return;
            const currentItem = currentList[currentIndex];
            const word = currentItem.Word;

            // ë¡œì»¬ ìƒíƒœ ì¦‰ì‹œ ë°˜ì˜ (UX í–¥ìƒ)
            statusData[word] = newStatus;
            renderSidebar(); // ì‚¬ì´ë“œë°” ì¦‰ì‹œ ê°±ì‹ 
            updateStatusButtons(newStatus); // ë²„íŠ¼ ì¦‰ì‹œ ê°±ì‹ 

            // ì„œë²„ ì €ì¥
            window.set(window.ref(window.db, 'users/' + userSyncId + '/' + word), newStatus)
                .catch((error) => alert("ë™ê¸°í™” ì‹¤íŒ¨: " + error.message));
        }

        window.toggleSidebar = function() {
            const sb = document.getElementById('sidebar');
            const ol = document.getElementById('sidebar-overlay');
            if (sb.classList.contains('closed')) {
                sb.classList.remove('closed'); sb.classList.add('open');
                ol.classList.remove('hidden');
                renderSidebar(); // ì—´ ë•Œ í™•ì‹¤íˆ ë Œë”ë§
            } else {
                sb.classList.remove('open'); sb.classList.add('closed');
                ol.classList.add('hidden');
            }
        }

        window.renderSidebar = function() {
            const container = document.getElementById('sidebar-content');
            container.innerHTML = '';

            const groups = { unknown: [], ambiguous: [], memorized: [] };
            rawVocabulary.forEach(item => {
                const st = statusData[item.Word] || 'unknown';
                if(groups[st]) groups[st].push(item);
            });

            const labels = { unknown: 'ğŸ”´ ëª»ì™¸ì›€', ambiguous: 'ğŸŸ¡ ì• ë§¤í•¨', memorized: 'ğŸŸ¢ ì™¸ì›€' };

            for (const [key, list] of Object.entries(groups)) {
                // ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆì–´ë„ ê·¸ë£¹ í—¤ë”ëŠ” ë³´ì—¬ì£¼ëŠ”ê²Œ ì¢‹ì„ ìˆ˜ ìˆì§€ë§Œ, ì—¬ê¸°ì„  ë°ì´í„° ìˆëŠ” ê²ƒë§Œ í‘œì‹œ
                const details = document.createElement('details');
                details.open = true;
                
                const summary = document.createElement('summary');
                summary.className = "cursor-pointer font-bold text-gray-700 py-2 select-none list-none flex items-center hover:bg-gray-50 rounded px-2";
                summary.innerHTML = `<span class="mr-2 text-xs">â–¼</span> ${labels[key]} <span class="ml-auto text-xs bg-gray-200 px-2 py-0.5 rounded-full text-gray-600">${list.length}</span>`;
                
                const ul = document.createElement('ul');
                ul.className = "pl-2 space-y-1 mt-1 mb-4";

                if (list.length === 0) {
                    const emptyLi = document.createElement('li');
                    emptyLi.className = "text-xs text-gray-400 pl-4 py-1";
                    emptyLi.innerText = "(ì—†ìŒ)";
                    ul.appendChild(emptyLi);
                } else {
                    list.forEach(wordItem => {
                        const li = document.createElement('li');
                        li.className = "text-sm text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 cursor-pointer py-1.5 px-2 rounded truncate transition";
                        li.innerText = `${wordItem.Word}`;
                        li.onclick = () => jumpToWord(wordItem.Word);
                        ul.appendChild(li);
                    });
                }

                details.appendChild(summary);
                details.appendChild(ul);
                container.appendChild(details);
            }
        }

        function jumpToWord(word) {
            // í˜„ì¬ í•„í„°ì™€ ìƒê´€ì—†ì´ ì „ì²´ì—ì„œ ì°¾ì•„ì„œ ì´ë™í• ì§€, í•„í„°ë¥¼ í’€ì§€ ê²°ì •
            // UXìƒ í•„í„°ë¥¼ 'ì „ì²´'ë¡œ ë°”ê¾¸ê³  ì´ë™í•˜ëŠ”ê²Œ ê°€ì¥ í™•ì‹¤í•¨
            if (currentFilter !== 'all') {
                document.getElementById('btn-filter-all').click(); // ì „ì²´ í•„í„° í´ë¦­ íŠ¸ë¦¬ê±°
            }
            
            // setFilterê°€ ë¹„ë™ê¸°ê°€ ì•„ë‹ˆë¯€ë¡œ ë°”ë¡œ ê²€ìƒ‰ ê°€ëŠ¥
            // ë‹¤ë§Œ setFilter ë‚´ë¶€ì—ì„œ renderCardë¥¼ í•˜ë¯€ë¡œ, ì¸ë±ìŠ¤ë§Œ ì°¾ì•„ì„œ ë‹¤ì‹œ render
            const targetIndex = currentList.findIndex(item => item.Word === word);
            if (targetIndex !== -1) {
                currentIndex = targetIndex;
                renderCard();
                // ëª¨ë°”ì¼ì—ì„œëŠ” ì‚¬ì´ë“œë°” ë‹«ê¸°
                if(window.innerWidth < 768) toggleSidebar();
            }
        }

        // í‚¤ë³´ë“œ ì¡°ì‘
        document.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowRight') nextCard();
            else if(e.key === 'ArrowLeft') prevCard();
            else if(e.key === ' ' || e.key === 'Enter') { e.preventDefault(); flipCard(); }
        });

    </script>
</body>
</html>